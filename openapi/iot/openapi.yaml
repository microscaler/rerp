openapi: 3.1.0
info:
  title: Iot API Gateway
  description: 'IoT device integration and data collection.. This aggregates and proxies requests to Iot microservices. This
    is the single entry point for the Iot system.


    All requests are proxied to the appropriate sub-service:

    - `/api/v1/iot/core/*` â†’ Core Service


    **Note**: This spec is automatically generated from sub-service specs. Do not edit manually - changes will be overwritten
    on next generation.


    **Generation**: This file is completely regenerated (clobbered) each time the generation script runs, ensuring idempotent
    output.


    **Service Discovery**: Sub-services are discovered from openapi/iot/ directory.'
  version: 1.0.0
servers:
- url: /api/v1/iot
  description: Iot API Gateway
tags: []
paths:
  /devices:
    get:
      operationId: list_devices
      summary: List devices
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of devices
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Device'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/iot/core
    post:
      operationId: create_device
      summary: Create device
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDeviceRequest'
      responses:
        '201':
          description: Device created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/iot/core
  /devices/{id}:
    get:
      operationId: get_device
      summary: Get device by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Device details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
    put:
      operationId: update_device
      summary: Update device
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDeviceRequest'
      responses:
        '200':
          description: Device updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
    delete:
      operationId: delete_device
      summary: Delete device
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Device deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
  /readings:
    get:
      operationId: list_readings
      summary: List readings
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of readings
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Reading'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/iot/core
    post:
      operationId: create_reading
      summary: Create reading
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReadingRequest'
      responses:
        '201':
          description: Reading created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Reading'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/iot/core
  /readings/{id}:
    get:
      operationId: get_reading
      summary: Get reading by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Reading details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Reading'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
    put:
      operationId: update_reading
      summary: Update reading
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReadingRequest'
      responses:
        '200':
          description: Reading updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Reading'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
    delete:
      operationId: delete_reading
      summary: Delete reading
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Reading deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
  /sensors:
    get:
      operationId: list_sensors
      summary: List sensors
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of sensors
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Sensor'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/iot/core
    post:
      operationId: create_sensor
      summary: Create sensor
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSensorRequest'
      responses:
        '201':
          description: Sensor created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sensor'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/iot/core
  /sensors/{id}:
    get:
      operationId: get_sensor
      summary: Get sensor by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Sensor details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sensor'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
    put:
      operationId: update_sensor
      summary: Update sensor
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSensorRequest'
      responses:
        '200':
          description: Sensor updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sensor'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
    delete:
      operationId: delete_sensor
      summary: Delete sensor
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Sensor deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/iot/core
components:
  parameters:
    Page:
      name: page
      in: query
      schema:
        type: integer
        minimum: 1
        default: 1
    Limit:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    Search:
      name: search
      in: query
      schema:
        type: string
  schemas:
    Error:
      type: object
      required:
      - error
      - message
      properties:
        error:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          nullable: true
          description: Additional error details
          additionalProperties: true
