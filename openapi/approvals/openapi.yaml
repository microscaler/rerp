openapi: 3.1.0
info:
  title: Approvals API Gateway
  description: 'Multi-level approval processes for business transactions.. This aggregates and proxies requests to Approvals
    microservices. This is the single entry point for the Approvals system.


    All requests are proxied to the appropriate sub-service:

    - `/api/v1/approvals/core/*` â†’ Core Service


    **Note**: This spec is automatically generated from sub-service specs. Do not edit manually - changes will be overwritten
    on next generation.


    **Generation**: This file is completely regenerated (clobbered) each time the generation script runs, ensuring idempotent
    output.


    **Service Discovery**: Sub-services are discovered from openapi/approvals/ directory.'
  version: 1.0.0
servers:
- url: /api/v1/approvals
  description: Approvals API Gateway
tags: []
paths:
  /approval-requests:
    get:
      operationId: list_approval_requests
      summary: List approval-requests
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of approval-requests
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApprovalRequest'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    post:
      operationId: create_approval_request
      summary: Create approval-request
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateApprovalRequestRequest'
      responses:
        '201':
          description: ApprovalRequest created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApprovalRequest'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/approvals/core
  /approval-requests/{id}:
    get:
      operationId: get_approval_request
      summary: Get approval-request by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ApprovalRequest details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApprovalRequest'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    put:
      operationId: update_approval_request
      summary: Update approval-request
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApprovalRequestRequest'
      responses:
        '200':
          description: ApprovalRequest updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApprovalRequest'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    delete:
      operationId: delete_approval_request
      summary: Delete approval-request
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: ApprovalRequest deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
  /approval-workflows:
    get:
      operationId: list_approval_workflows
      summary: List approval-workflows
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of approval-workflows
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApprovalWorkflow'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    post:
      operationId: create_approval_workflow
      summary: Create approval-workflow
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateApprovalWorkflowRequest'
      responses:
        '201':
          description: ApprovalWorkflow created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApprovalWorkflow'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/approvals/core
  /approval-workflows/{id}:
    get:
      operationId: get_approval_workflow
      summary: Get approval-workflow by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ApprovalWorkflow details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApprovalWorkflow'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    put:
      operationId: update_approval_workflow
      summary: Update approval-workflow
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApprovalWorkflowRequest'
      responses:
        '200':
          description: ApprovalWorkflow updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApprovalWorkflow'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    delete:
      operationId: delete_approval_workflow
      summary: Delete approval-workflow
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: ApprovalWorkflow deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
  /delegations:
    get:
      operationId: list_delegations
      summary: List delegations
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of delegations
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Delegation'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    post:
      operationId: create_delegation
      summary: Create delegation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDelegationRequest'
      responses:
        '201':
          description: Delegation created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Delegation'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/approvals/core
  /delegations/{id}:
    get:
      operationId: get_delegation
      summary: Get delegation by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Delegation details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Delegation'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    put:
      operationId: update_delegation
      summary: Update delegation
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDelegationRequest'
      responses:
        '200':
          description: Delegation updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Delegation'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
    delete:
      operationId: delete_delegation
      summary: Delete delegation
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Delegation deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/approvals/core
components:
  parameters:
    Page:
      name: page
      in: query
      schema:
        type: integer
        minimum: 1
        default: 1
    Limit:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    Search:
      name: search
      in: query
      schema:
        type: string
  schemas:
    Error:
      type: object
      required:
      - error
      - message
      properties:
        error:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          nullable: true
          description: Additional error details
          additionalProperties: true
