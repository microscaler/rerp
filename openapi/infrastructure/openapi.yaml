openapi: 3.1.0
info:
  title: Infrastructure API Gateway
  description: 'API gateway and integration platform services.. This aggregates and proxies requests to Infrastructure microservices.
    This is the single entry point for the Infrastructure system.


    All requests are proxied to the appropriate sub-service:

    - `/api/v1/infrastructure/gateway/*` → Gateway Service

    - `/api/v1/infrastructure/integration-platform/*` → IntegrationPlatform Service


    **Note**: This spec is automatically generated from sub-service specs. Do not edit manually - changes will be overwritten
    on next generation.


    **Generation**: This file is completely regenerated (clobbered) each time the generation script runs, ensuring idempotent
    output.


    **Service Discovery**: Sub-services are discovered from openapi/infrastructure/ directory.'
  version: 1.0.0
servers:
- url: /api/v1/infrastructure
  description: Infrastructure API Gateway
tags: []
paths:
  /api-keys:
    get:
      operationId: list_api_keys
      summary: List api-keys
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of api-keys
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApiKey'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    post:
      operationId: create_api_key
      summary: Create api-key
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateApiKeyRequest'
      responses:
        '201':
          description: ApiKey created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiKey'
        '400':
          description: Invalid request
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /api-keys/{id}:
    get:
      operationId: get_api_key
      summary: Get api-key by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: ApiKey details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiKey'
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    put:
      operationId: update_api_key
      summary: Update api-key
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApiKeyRequest'
      responses:
        '200':
          description: ApiKey updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiKey'
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    delete:
      operationId: delete_api_key
      summary: Delete api-key
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: ApiKey deleted
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /health:
    get:
      operationId: health_check
      summary: Gateway health check
      responses:
        '200':
          description: Success
        '400':
          description: Bad request
        '404':
          description: Not found
        '500':
          description: Internal server error
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
  /integrations:
    get:
      operationId: list_integrations
      summary: List integrations
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of integrations
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Integration'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    post:
      operationId: create_integration
      summary: Create integration
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateIntegrationRequest'
      responses:
        '201':
          description: Integration created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Integration'
        '400':
          description: Invalid request
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /integrations/{id}:
    get:
      operationId: get_integration
      summary: Get integration by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Integration details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Integration'
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    put:
      operationId: update_integration
      summary: Update integration
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateIntegrationRequest'
      responses:
        '200':
          description: Integration updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Integration'
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    delete:
      operationId: delete_integration
      summary: Delete integration
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Integration deleted
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /integrations/{integrationId}/test:
    post:
      operationId: test_integration
      summary: Test integration connection
      responses:
        '200':
          description: Success
        '400':
          description: Bad request
        '404':
          description: Not found
        '500':
          description: Internal server error
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties: {}
      parameters:
      - name: integrationId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /metrics:
    get:
      operationId: get_metrics
      summary: Get gateway metrics
      responses:
        '200':
          description: Success
        '400':
          description: Bad request
        '404':
          description: Not found
        '500':
          description: Internal server error
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
  /policys:
    get:
      operationId: list_policys
      summary: List policys
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of policys
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Policy'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
    post:
      operationId: create_policy
      summary: Create policy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePolicyRequest'
      responses:
        '201':
          description: Policy created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'
        '400':
          description: Invalid request
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
  /policys/{id}:
    get:
      operationId: get_policy
      summary: Get policy by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Policy details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'
        '404':
          description: Not found
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
    put:
      operationId: update_policy
      summary: Update policy
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePolicyRequest'
      responses:
        '200':
          description: Policy updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'
        '404':
          description: Not found
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
    delete:
      operationId: delete_policy
      summary: Delete policy
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Policy deleted
        '404':
          description: Not found
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
  /routes:
    get:
      operationId: list_routes
      summary: List routes
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of routes
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Route'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
    post:
      operationId: create_route
      summary: Create route
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRouteRequest'
      responses:
        '201':
          description: Route created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Route'
        '400':
          description: Invalid request
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
  /routes/{id}:
    get:
      operationId: get_route
      summary: Get route by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Route details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Route'
        '404':
          description: Not found
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
    put:
      operationId: update_route
      summary: Update route
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRouteRequest'
      responses:
        '200':
          description: Route updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Route'
        '404':
          description: Not found
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
    delete:
      operationId: delete_route
      summary: Delete route
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Route deleted
        '404':
          description: Not found
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
  /routes/{routeId}/test:
    post:
      operationId: test_route
      summary: Test route configuration
      responses:
        '200':
          description: Success
        '400':
          description: Bad request
        '404':
          description: Not found
        '500':
          description: Internal server error
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties: {}
      parameters:
      - name: routeId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      x-service: gateway
      x-service-base-path: /api/v1/infrastructure/gateway
  /webhooks:
    get:
      operationId: list_webhooks
      summary: List webhooks
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of webhooks
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Webhook'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    post:
      operationId: create_webhook
      summary: Create webhook
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWebhookRequest'
      responses:
        '201':
          description: Webhook created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Webhook'
        '400':
          description: Invalid request
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /webhooks/{id}:
    get:
      operationId: get_webhook
      summary: Get webhook by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Webhook details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Webhook'
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    put:
      operationId: update_webhook
      summary: Update webhook
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWebhookRequest'
      responses:
        '200':
          description: Webhook updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Webhook'
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
    delete:
      operationId: delete_webhook
      summary: Delete webhook
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Webhook deleted
        '404':
          description: Not found
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /webhooks/{webhookId}/events:
    get:
      operationId: get_webhook_events
      summary: Get webhook event history
      responses:
        '200':
          description: Success
        '400':
          description: Bad request
        '404':
          description: Not found
        '500':
          description: Internal server error
      parameters:
      - name: webhookId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
  /webhooks/{webhookId}/trigger:
    post:
      operationId: trigger_webhook
      summary: Manually trigger webhook
      responses:
        '200':
          description: Success
        '400':
          description: Bad request
        '404':
          description: Not found
        '500':
          description: Internal server error
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties: {}
      parameters:
      - name: webhookId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      x-service: integration-platform
      x-service-base-path: /api/v1/infrastructure/integration-platform
components:
  parameters:
    Page:
      name: page
      in: query
      schema:
        type: integer
        minimum: 1
        default: 1
    Limit:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    Search:
      name: search
      in: query
      schema:
        type: string
  schemas:
    Error:
      type: object
      required:
      - error
      - message
      properties:
        error:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          nullable: true
          description: Additional error details
          additionalProperties: true
