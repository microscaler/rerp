openapi: 3.1.0
info:
  title: Documents API Gateway
  description: 'Document storage, organization, and version control.. This aggregates and proxies requests to Documents microservices.
    This is the single entry point for the Documents system.


    All requests are proxied to the appropriate sub-service:

    - `/api/v1/documents/core/*` â†’ Core Service


    **Note**: This spec is automatically generated from sub-service specs. Do not edit manually - changes will be overwritten
    on next generation.


    **Generation**: This file is completely regenerated (clobbered) each time the generation script runs, ensuring idempotent
    output.


    **Service Discovery**: Sub-services are discovered from openapi/documents/ directory.'
  version: 1.0.0
servers:
- url: /api/v1/documents
  description: Documents API Gateway
tags: []
paths:
  /documents:
    get:
      operationId: listDocuments
      summary: List documents
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of documents
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Document'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/documents/core
    post:
      operationId: createDocument
      summary: Create document
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDocumentRequest'
      responses:
        '201':
          description: Document created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/documents/core
  /documents/{id}:
    get:
      operationId: getDocument
      summary: Get document by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Document details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
    put:
      operationId: updateDocument
      summary: Update document
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDocumentRequest'
      responses:
        '200':
          description: Document updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
    delete:
      operationId: deleteDocument
      summary: Delete document
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Document deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
  /folders:
    get:
      operationId: listFolders
      summary: List folders
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of folders
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Folder'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/documents/core
    post:
      operationId: createFolder
      summary: Create folder
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFolderRequest'
      responses:
        '201':
          description: Folder created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Folder'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/documents/core
  /folders/{id}:
    get:
      operationId: getFolder
      summary: Get folder by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Folder details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Folder'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
    put:
      operationId: updateFolder
      summary: Update folder
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFolderRequest'
      responses:
        '200':
          description: Folder updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Folder'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
    delete:
      operationId: deleteFolder
      summary: Delete folder
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Folder deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
  /versions:
    get:
      operationId: listVersions
      summary: List versions
      parameters:
      - $ref: '#/components/parameters/Page'
      - $ref: '#/components/parameters/Limit'
      - $ref: '#/components/parameters/Search'
      responses:
        '200':
          description: List of versions
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Version'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
      x-service: core
      x-service-base-path: /api/v1/documents/core
    post:
      operationId: createVersion
      summary: Create version
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVersionRequest'
      responses:
        '201':
          description: Version created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
        '400':
          description: Invalid request
      x-service: core
      x-service-base-path: /api/v1/documents/core
  /versions/{id}:
    get:
      operationId: getVersion
      summary: Get version by id
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Version details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
    put:
      operationId: updateVersion
      summary: Update version
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateVersionRequest'
      responses:
        '200':
          description: Version updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
    delete:
      operationId: deleteVersion
      summary: Delete version
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '204':
          description: Version deleted
        '404':
          description: Not found
      x-service: core
      x-service-base-path: /api/v1/documents/core
components:
  parameters:
    Page:
      name: page
      in: query
      schema:
        type: integer
        minimum: 1
        default: 1
    Limit:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    Search:
      name: search
      in: query
      schema:
        type: string
  schemas:
    Error:
      type: object
      required:
      - error
      - message
      properties:
        error:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          nullable: true
          description: Additional error details
          additionalProperties: true
